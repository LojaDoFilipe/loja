product-card, .product-card {
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:1.05rem 1.1rem 1.25rem;
  border-radius:var(--radius-lg);
  background:linear-gradient(145deg, var(--color-surface) 0%, var(--color-surface-alt) 85%);
  position:relative;
  cursor:pointer;
  border:1px solid rgba(var(--color-shadow-rgb)/0.07);
  box-shadow: var(--elev-1);
  transition: box-shadow var(--transition-medium), transform var(--transition-medium), border-color var(--transition-fast), background var(--transition-medium);
  isolation:isolate;
}

/* New product badge */
/* Image wrapper so badge anchors correctly (base styles merged below) */
.badge-new {
  position: absolute;
  top: 4px;
  left: 4px;
  background: linear-gradient(135deg, var(--color-accent,#ff6633), #ff914d);
  color: #fff;
  font-size: .55rem;
  font-weight: 700;
  padding: .3rem .48rem .28rem;
  border-radius: 999px;
  letter-spacing: .7px;
  box-shadow: 0 2px 4px -1px rgba(0,0,0,.25), 0 0 0 1px rgba(255,255,255,.15) inset;
  display:inline-flex;
  align-items:center;
  gap:.25rem;
  z-index: 3;
  animation: badgePop .55s cubic-bezier(.4,0,.25,1);
  pointer-events:none; /* allow clicks to pass through to image */
}
.badge-new::before {
  content: '';
  width: 6px;
  height: 6px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 3px rgba(255,255,255,.25);
  opacity:.9;
}
@keyframes badgePop { 0% { transform: scale(.4); opacity:0; } 60% { transform: scale(1.15); opacity:1; } 100% { transform: scale(1); } }

/* Vertical separator (refined): sits just inside right edge so gap isn't perceived as larger */
.product-card::after {
  content: '';
  position: absolute;
  top: 10%;
  bottom: 10%;
  right: 0; /* inside border */
  width: 0; /* we'll draw with a box-shadow for a hairline */
  box-shadow: 1px 0 0 0 rgba(var(--color-shadow-rgb),0.12);
  pointer-events: none;
}
/* Remove separator when card hovered/focused to reduce visual noise */
.product-card:hover::after, .product-card:focus::after { box-shadow: none; }

/* Hide separator on last column using a media query approximation: we'll suppress on wrap by detecting narrow width */
@media (max-width: 600px) {
  .product-card::after { display: none; }
}

.product-card:hover, .product-card:focus { box-shadow: var(--elev-2); transform:translateY(-5px); border-color: var(--color-primary); }
.product-card:focus { outline:none; box-shadow: var(--elev-focus), var(--elev-2); }

.card-content { display: flex; flex-direction: column; align-items: center; width: 100%;}
/* Uniform sizing & positioning */
.media-wrapper {
  position:relative;
  display:flex;
  width:210px;
  aspect-ratio:3 / 4;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  border-radius: var(--radius-md);
  background:#f1f5f8;
  box-shadow: 0 4px 10px -2px rgba(var(--color-shadow-rgb)/0.15);
  margin-bottom:.7rem;
}
.product-image {
  width:100%;
  height:100%;
  object-fit:cover; /* crop to fill box uniformly */
  display:block;
  transition: transform var(--transition-medium);
}
.product-card:hover .product-image { transform: scale(1.02); }
.product-info { display: flex; flex-direction: column; align-items: center; text-align: center; }
.product-price {
  font-size: 1.15rem;
  font-weight: 700;
  letter-spacing: .6px;
  margin-bottom: .35rem;
  display: inline-block; /* Helps with rendering consistency */
}
.add-cart-btn { position:relative; overflow:hidden; margin-top:.3rem; background: var(--color-accent-gradient); color:#fff; border:none; padding:.55rem 1.05rem; border-radius: var(--radius-pill); font-size:.7rem; font-weight:700; letter-spacing:.65px; cursor:pointer; transition: box-shadow var(--transition-fast), transform var(--transition-fast), filter var(--transition-fast); box-shadow:0 2px 6px -1px rgba(var(--color-shadow-rgb)/0.25), 0 0 0 1px rgba(var(--color-shadow-rgb)/0.07) inset; }
.add-cart-btn:hover, .add-cart-btn:focus { filter:brightness(1.05); box-shadow:0 4px 14px -2px rgba(var(--color-shadow-rgb)/0.3); outline:none; }
.add-cart-btn:active { transform:translateY(1px) scale(.97); }
.add-cart-btn::after { content:""; position:absolute; inset:0; background: radial-gradient(circle at var(--x,50%) var(--y,50%), rgba(255,255,255,.55), transparent 55%); opacity:0; transition: opacity .4s ease; }
.add-cart-btn:focus-visible::after { opacity:.35; }

/* Ripple interaction */
.add-cart-btn:active::after { opacity:.65; transition:none; }

/* Quantity controls */
.qty-controls { display:inline-flex; align-items:center; gap:.55rem; background:linear-gradient(135deg,var(--color-surface-alt) 0%, var(--color-surface) 85%); padding:.4rem .65rem; border-radius: var(--radius-pill); border:1px solid var(--color-border); box-shadow: var(--elev-1); margin-top:.35rem; }
.qty { min-width:1.4rem; text-align:center; font-weight:700; font-size:.8rem; letter-spacing:.5px; color: var(--color-text-strong, #0d2235); }
.qty-btn { background: var(--color-primary-soft); border:1px solid var(--color-border); color: var(--color-primary); width:1.75rem; height:1.75rem; border-radius:50%; font-size:1rem; display:flex; align-items:center; justify-content:center; cursor:pointer; font-weight:600; line-height:1; padding:0; transition: background var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast), transform var(--transition-fast); }
.qty-btn:hover, .qty-btn:focus { background: var(--color-primary); color:#fff; border-color: var(--color-primary); box-shadow: var(--elev-2); outline:none; }
.qty-btn:active { transform:translateY(1px) scale(.92); }
.qty-btn.dec { font-size:1.1rem; }
.qty-btn.inc { font-size:1.05rem; }

@media (max-width: 640px) {
  .media-wrapper { width:100%; max-width:240px; }
}
